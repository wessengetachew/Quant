<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farey Sector Alpha - Trading Simulator</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #0e1117; color: #e0e0e0; padding: 20px; line-height: 1.6; }
        .container { max-width: 900px; margin: auto; background: #161b22; padding: 30px; border-radius: 12px; border: 1px solid #30363d; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h1 { color: #58a6ff; border-bottom: 1px solid #30363d; padding-bottom: 10px; }
        .dashboard { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .card { background: #0d1117; padding: 20px; border-radius: 8px; border-left: 4px solid #58a6ff; }
        .price-display { font-size: 2.5rem; font-weight: bold; color: #39d353; text-align: center; margin: 20px 0; font-family: monospace; }
        .unity-alert { background: #3e330a; border: 1px solid #d29922; color: #e3b341; padding: 10px; border-radius: 5px; display: none; margin-top: 10px; font-weight: bold; }
        .stats { font-size: 0.9rem; color: #8b949e; }
        .formula { background: #1c2128; padding: 10px; border-radius: 4px; font-family: 'Courier New', Courier, monospace; color: #ff7b72; margin-top: 10px; }
        .btn { background: #238636; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn:hover { background: #2ea043; }
        .monetize-box { margin-top: 30px; border: 2px dashed #30363d; padding: 20px; border-radius: 8px; background: #161b22; }
    </style>
</head>
<body>

<div class="container">
    <h1>Farey Sector Alpha Engine</h1>
    <p>Utilizing the <strong>Unity Bound ($\sqrt{3}/\pi$)</strong> to identify high-resolution liquidity gaps.</p>

    <div class="price-display" id="price-box">$65,000.00</div>
    
    <div class="dashboard">
        <div class="card">
            <h3>Sector Analytics</h3>
            <div class="stats">Current Sector (n): <span id="sector-n">--</span></div>
            <div class="stats">Predicted Density C(n,N): <span id="density-val">--</span></div>
            <div class="stats">Market Friction: <span id="friction-level">--</span></div>
            <div id="unity-warning" class="unity-alert">⚠️ UNITY BOUND REACHED: ZERO FRICTION ZONE</div>
        </div>

        <div class="card">
            <h3>Live Inputs</h3>
            <label>Range N:</label>
            <input type="number" id="range-n" value="2000" style="width: 80%; background: #0d1117; color: white; border: 1px solid #30363d; padding: 5px;">
            <p class="stats" style="margin-top:10px;">The current price is being mapped to a Farey range where $N = 2000$.</p>
            <div class="formula">C = (3*N²) / (π² * n * (n+1))</div>
        </div>
    </div>

    <button class="btn" onclick="toggleSim()">Toggle Live Market Feed</button>

    <div class="monetize-box">
        <h3 style="color: #d29922;">How to Monetize this View:</h3>
        <ul class="stats">
            <li><strong>Flash Crash Prediction:</strong> Low density zones (C < 10) indicate areas where price "slips" due to lack of rational anchors.</li>
            <li><strong>The Gold Line:</strong> The Unity Bound ($\sqrt{3}/\pi$) predicts the exact price point where the sequence hits a unique pair.</li>
            <li><strong>Arbitrage:</strong> Compare different N-ranges to find overlapping "Super Sectors."</li>
        </ul>
    </div>
</div>

<script>
    let price = 65000;
    let simRunning = false;
    const PI_SQ = Math.pow(Math.PI, 2);

    function updateMath() {
        const N = parseFloat(document.getElementById('range-n').value);
        const priceScale = 100000; // Normalizing to 100k ceiling
        
        // Normalize price to (0,1]
        let normPrice = (price % priceScale) / priceScale;
        if (normPrice <= 0) normPrice = 0.0001;

        // Calculate Sector n
        let n = Math.floor(1 / normPrice);
        document.getElementById('sector-n').innerText = n;

        // Calculate C(n, N)
        let density = (3 * Math.pow(N, 2)) / (PI_SQ * n * (n + 1));
        document.getElementById('density-val').innerText = Math.round(density).toLocaleString();

        // Calculate Friction Level
        let friction = density > 1000 ? "High (Stable)" : density > 50 ? "Medium (Tradeable)" : "Low (Volatility Gap)";
        document.getElementById('friction-level').innerText = friction;

        // Unity Bound Detection (sqrt(3)/pi)
        const unityN = Math.floor(N * (Math.sqrt(3) / Math.PI));
        const unityWarning = document.getElementById('unity-warning');
        if (Math.abs(n - unityN) < 2) {
            unityWarning.style.display = "block";
        } else {
            unityWarning.style.display = "none";
        }
    }

    function toggleSim() {
        simRunning = !simRunning;
        if (simRunning) {
            runPriceSim();
        }
    }

    function runPriceSim() {
        if (!simRunning) return;
        // Random walk sim
        price += (Math.random() - 0.5) * 500;
        if (price < 1000) price = 1000;
        document.getElementById('price-box').innerText = "$" + price.toLocaleString(undefined, {minimumFractionDigits: 2});
        updateMath();
        setTimeout(runPriceSim, 500);
    }

    updateMath();
</script>

</body>
</html>
